<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Olympic Golf Putt Score App üèåÔ∏è‚Äç‚ôÇÔ∏èby James</title>
<link rel="manifest" href="manifest.json">
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#e0f7fa; }
.container { max-width:600px; margin:20px auto; background:#d0f0e0; padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); }
h1, h2 { text-align:center; color:#00695c; }
input[type="text"], input[type="number"] { width:100%; padding:8px; margin:5px 0 15px; box-sizing:border-box; border-radius:5px; border:1px solid #00796b; }
button { padding:10px 15px; margin:3px; border:none; border-radius:5px; cursor:pointer; background:#00796b; color:#fff; }
button:hover { opacity:0.9; }
.card { background:#b2dfdb; padding:10px; border-radius:5px; margin-bottom:15px; }
.score-table, .hole-table { width:100%; border-collapse: collapse; margin-top:10px; }
.score-table th, .score-table td, .hole-table th, .hole-table td { border:1px solid #004d40; padding:5px; text-align:center; }
.winner { background:gold; font-weight:bold; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:20px; border-radius:8px; max-width:400px; width:90%; overflow-y:auto; max-height:90%; }
.modal-content h2 { margin-top:0; color:#00695c; }
.modal button { margin-top:10px; background:#00796b; }
.label-player { font-weight:bold; }
.flex-btn { display:flex; flex-wrap:wrap; justify-content:center; }
.flex-btn button { flex:1 1 auto; margin:3px; min-width:80px; }
</style>
</head>
<body>

<div class="container" id="setupScreen">
  <h1>Olympic Golf Putt Score App üèåÔ∏è‚Äç‚ôÇÔ∏èby James</h1>
  <div class="card">
    <button onclick="openRules()">üìñ ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤</button>
  </div>
  <input type="number" id="numPlayers" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô" min="2" max="10">
  <div id="playerNamesInputs"></div>
  <input type="number" id="pricePerPoint" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
  <div class="flex-btn">
    <button onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
    <button onclick="resetAll()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>
</div>

<div class="container" id="gameScreen" style="display:none;">
  <h2>‡∏´‡∏•‡∏∏‡∏° <span id="currentHole">1</span>/18</h2>
  <div id="scoreInputs"></div>
  <div class="flex-btn">
    <button onclick="prevHole()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
    <button onclick="nextHole()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ(‡∏ß‡πà‡∏≤‡∏á=0)</button>
    <button onclick="showHoleScores()">üìä ‡∏î‡∏π‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏°</button>
    <button onclick="goToHole(8)">‚Ü© ‡∏´‡∏•‡∏∏‡∏° 9</button>
    <button onclick="goToHole(17)">‚Ü© ‡∏´‡∏•‡∏∏‡∏° 18</button>
    <button onclick="resetAll()">‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>
</div>

<div class="container" id="summaryScreen" style="display:none;">
  <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô & ‡πÄ‡∏á‡∏¥‡∏ô</h2>
  <table class="score-table" id="summaryTable"></table>
  <div class="flex-btn">
    <button onclick="shareResults()">üì§ ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
    <button onclick="goToHole(8)">‚Ü© ‡∏´‡∏•‡∏∏‡∏° 9</button>
    <button onclick="goToHole(17)">‚Ü© ‡∏´‡∏•‡∏∏‡∏° 18</button>
    <button onclick="resetAll()">‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>
</div>

<!-- Modal ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ -->
<div class="modal" id="modalRules">
  <div class="modal-content">
    <h2>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏û‡∏±‡∏ï‡∏Å‡∏≠‡∏•‡πå‡∏ü‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÇ‡∏≠‡∏•‡∏¥‡∏°‡∏õ‡∏¥‡∏Å (Olympic Putting Rules)</h2>
    <ol>
      <li>
        <strong>‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Scoring System)</strong>
        <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏°‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏Å‡∏•‡πâ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏´‡∏•‡∏∏‡∏°:</p>
        <ul>
          <li>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1: 1 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
          <li>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2: 2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
          <li>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 3: 3 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
          <li>‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 4: 4 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 4 ‡∏Ñ‡∏ô)</li>
        </ul>
        <p>‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏£‡∏ß‡∏°: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</p>
      </li>
      <li>
        <strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (Payout Calculation)</strong>
        <ul>
          <li>‡∏ú‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô √ó ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô √ó ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô</li>
          <li>‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏° √ó ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
        </ul>
        <p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:</strong></p>
        <p>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 4 ‡∏Ñ‡∏ô (A,B,C,D), ‡∏£‡∏≤‡∏Ñ‡∏≤ 100/‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô, ‡∏ô‡∏≤‡∏¢ A ‡∏û‡∏±‡∏ï‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÑ‡∏Å‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (4 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô):</p>
        <ul>
          <li>‡∏ô‡∏≤‡∏¢ A: ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å B,C,D ‡∏Ñ‡∏ô‡∏•‡∏∞ 400 ‡∏ö‡∏≤‡∏ó (‡∏£‡∏ß‡∏° 1,200 ‡∏ö‡∏≤‡∏ó)</li>
          <li>‡∏ô‡∏≤‡∏¢ B,C,D: ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ô‡∏≤‡∏¢ A ‡∏Ñ‡∏ô‡∏•‡∏∞ 400 ‡∏ö‡∏≤‡∏ó</li>
        </ul>
      </li>
      <li>
        <strong>‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏© (Special Rules)</strong>
        <ul>
          <li>Birdie Bonus: ‡∏Ñ‡∏π‡∏ì 2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô/‡πÄ‡∏á‡∏¥‡∏ô</li>
          <li>Bokey Cap: Double Bogey ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ = 0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
          <li>Chip-in Bonus: ‡∏ä‡∏¥‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏µ‡∏ô = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏´‡∏•‡∏∏‡∏° + ‡πÇ‡∏ö‡∏ô‡∏±‡∏™</li>
        </ul>
      </li>
      <li>
        <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</strong>
        <ul>
          <li>‡∏û‡∏±‡∏ï‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏µ‡∏ô: ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏Å‡∏•‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°</li>
          <li>‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô: ‡∏•‡∏π‡∏Å‡πÑ‡∏Å‡∏•‡∏™‡∏∏‡∏î‡∏û‡∏±‡∏ï‡∏Å‡πà‡∏≠‡∏ô</li>
        </ul>
      </li>
    </ol>
    <button onclick="closeRules()">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<!-- Modal ‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏´‡∏•‡∏∏‡∏° -->
<div class="modal" id="modalHoleScores">
  <div class="modal-content">
    <h2>‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏°</h2>
    <table class="hole-table" id="holeScoreTable"></table>
    <button onclick="closeHoleModal()">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<!-- Modal Reset -->
<div class="modal" id="modalReset">
  <div class="modal-content">
    <h2>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Reset</p>
    <button onclick="confirmReset()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
    <button onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>
</div>

<script>
let players=[], scores=[], currentHole=0, numHoles=18, pricePerPoint=10;

// ‡πÇ‡∏´‡∏•‡∏î/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
function loadData(){ players=JSON.parse(localStorage.getItem('players')||'[]'); scores=JSON.parse(localStorage.getItem('scores')||'[]'); }
function saveData(){ localStorage.setItem('players',JSON.stringify(players)); localStorage.setItem('scores',JSON.stringify(scores)); }

function startGame(){
  let num=parseInt(document.getElementById('numPlayers').value);
  if(isNaN(num)||num<2){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡∏ô"); return;}
  let priceInput=parseFloat(document.getElementById('pricePerPoint').value);
  if(isNaN(priceInput)||priceInput<=0){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"); return;}
  pricePerPoint=priceInput;

  let savedScores=JSON.parse(localStorage.getItem('scores')||'[]');

  players=[]; scores=[];
  for(let i=0;i<num;i++){
    players.push(document.getElementById('playerName'+i).value.trim()||'‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô'+(i+1));
    scores.push(savedScores[i]||Array(numHoles).fill(0));
  }
  currentHole=0; saveData(); showGameScreen();
}

function showGameScreen(){
  document.getElementById('setupScreen').style.display='none';
  document.getElementById('summaryScreen').style.display='none';
  document.getElementById('gameScreen').style.display='block';
  document.getElementById('currentHole').textContent=currentHole+1;
  renderScoreInputs();
}

function renderScoreInputs(){
  let html='';
  let totals=players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  players.forEach((p,i)=>{
    let runningTotal=scores[i].slice(0,currentHole).reduce((a,b)=>a+b,0);
    let currentScore=scores[i][currentHole]||0;
    let totalWithCurrent=runningTotal+currentScore;
    totals[i]=totalWithCurrent;
    html+=`<div><label id="label${i}" class="label-player">${p} (‡∏£‡∏ß‡∏°: ${totalWithCurrent})</label><input type="number" id="score${i}" value="${scores[i][currentHole]||''}"></div>`;
  });
  document.getElementById('scoreInputs').innerHTML=html;
  players.forEach((p,i)=>{
    document.getElementById('score'+i).addEventListener('input',()=>{
      scores[i][currentHole]=parseFloat(document.getElementById('score'+i).value)||0;
      saveData(); updateRankHighlight();
    });
  });
  updateRankHighlight();
}

function updateRankHighlight(){
  let totals=players.map((p,i)=>scores[i].slice(0,currentHole+1).reduce((a,b)=>a+b,0));
  let sorted=[...totals].map((v,i)=>({i,v})).sort((a,b)=>b.v-a.v);
  players.forEach((p,i)=>{
    document.getElementById('label'+i).textContent=`${p} (‡∏£‡∏ß‡∏°: ${totals[i]})`;
    document.getElementById('label'+i).style.color='black';
  });
  if(sorted[0]) document.getElementById('label'+sorted[0].i).style.color='gold';
  if(sorted[1]) document.getElementById('label'+sorted[1].i).style.color='silver';
  if(sorted[2]) document.getElementById('label'+sorted[2].i).style.color='#cd7f32';
}

function saveCurrentScores(){ players.forEach((p,i)=>scores[i][currentHole]=parseFloat(document.getElementById('score'+i).value)||0); saveData(); }

function nextHole(){ saveCurrentScores(); currentHole++; if(currentHole>=numHoles) showSummary(); else showGameScreen(); }
function prevHole(){ saveCurrentScores(); if(currentHole>0){currentHole--; showGameScreen();} }
function goToHole(hole){ saveCurrentScores(); currentHole=hole; showGameScreen(); }

function showSummary(){
  document.getElementById('gameScreen').style.display='none';
  document.getElementById('summaryScreen').style.display='block';
  let html='<tr><th>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</th><th>‡πÄ‡∏á‡∏¥‡∏ô</th></tr>';
  let totals=players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  let money=Array(players.length).fill(0);
  players.forEach((p,i)=>{
    let gain=totals[i]*pricePerPoint*(players.length-1);
    money[i]+=gain;
    players.forEach((other,j)=>{if(i!=j) money[j]-=totals[i]*pricePerPoint;});
  });
  let maxScore=Math.max(...totals);
  players.forEach((p,i)=>{ let cls=(totals[i]==maxScore)?'winner':''; html+=`<tr class="${cls}"><td>${p}</td><td>${totals[i]}</td><td>${money[i]}</td></tr>`; });
  document.getElementById('summaryTable').innerHTML=html;
}

function shareResults(){
  let totals=players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  let money=Array(players.length).fill(0);
  players.forEach((p,i)=>{
    let gain=totals[i]*pricePerPoint*(players.length-1);
    money[i]+=gain;
    players.forEach((other,j)=>{if(i!=j) money[j]-=totals[i]*pricePerPoint;});
  });
  let resultText='‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Golf Putt:\n';
  players.forEach((p,i)=>{resultText+=`${p}: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° ${totals[i]}, ‡πÄ‡∏á‡∏¥‡∏ô ${money[i]}\n`;});
  let textarea=document.createElement('textarea'); textarea.value=resultText;
  document.body.appendChild(textarea); textarea.select();
  try{document.execCommand('copy'); alert('‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ clipboard ‡πÅ‡∏•‡πâ‡∏ß!'); } 
  catch(e){alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ clipboard ‡πÑ‡∏î‡πâ:\n'+resultText);}
  document.body.removeChild(textarea);
}

function showHoleScores(){
  let html='<tr><th>‡∏´‡∏•‡∏∏‡∏°</th>'; players.forEach(p=>html+=`<th>${p}</th>`); html+='<th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏∞‡∏™‡∏°</th></tr>';
  let runningTotals=Array(players.length).fill(0);
  for(let h=0;h<numHoles;h++){ html+='<tr><td>'+(h+1)+'</td>'; players.forEach((p,i)=>{runningTotals[i]+=scores[i][h]; html+='<td>'+scores[i][h]+'</td>';}); html+='<td>'+runningTotals.join(' | ')+'</td>'; html+='</tr>'; }
  document.getElementById('holeScoreTable').innerHTML=html; document.getElementById('modalHoleScores').style.display='flex';
}
function closeHoleModal(){document.getElementById('modalHoleScores').style.display='none';}

function openRules(){document.getElementById('modalRules').style.display='flex';}
function closeRules(){document.getElementById('modalRules').style.display='none';}

function resetAll(){document.getElementById('modalReset').style.display='flex';}
function confirmReset(){localStorage.removeItem('players'); localStorage.removeItem('scores'); location.reload();}
function closeModal(){document.getElementById('modalReset').style.display='none';}
function goToSetup(){showScreen('setupScreen');}

function showScreen(id){
  document.getElementById('setupScreen').style.display='none';
  document.getElementById('gameScreen').style.display='none';
  document.getElementById('summaryScreen').style.display='none';
  document.getElementById(id).style.display='block';
}

// Dynamic player inputs
document.getElementById('numPlayers').addEventListener('input', function(){
  let n=parseInt(this.value); let html='';
  for(let i=0;i<n;i++){
    let saved=JSON.parse(localStorage.getItem('players')||'[]'); 
    html+=`<input type="text" id="playerName${i}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô ${i+1}" value="${saved[i]||''}">`;
  }
  document.getElementById('playerNamesInputs').innerHTML=html;
});

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
window.onload=function(){ loadData(); if(players.length>0){document.getElementById('numPlayers').value=players.length; document.getElementById('numPlayers').dispatchEvent(new Event('input')); } }
</script>

</body>
</html>
