<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Olympic Golf Putt Score App üèåÔ∏è‚Äç‚ôÇÔ∏è by James</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#26a69a">
<style>
body { 
  font-family: Arial, sans-serif; 
  margin:0; padding:0; 
  background:#e0f2f1; 
  color:#004d40;
}
.container { max-width:600px; margin:20px auto; background:#ffffff; padding:20px; border-radius:10px; box-shadow:0 3px 10px rgba(0,0,0,0.2); }
h1,h2 { text-align:center; color:#00695c; }
input[type="text"], input[type="number"] { width:100%; padding:8px; margin:5px 0 15px; box-sizing:border-box; border:1px solid #26a69a; border-radius:5px; }
button { padding:10px 15px; margin:5px; border:none; border-radius:5px; cursor:pointer; background-color:#26a69a; color:white; font-weight:bold; transition:0.2s; }
button:hover { background-color:#00796b; opacity:0.9; }
.card { background:#b2dfdb; padding:12px; border-radius:8px; margin-bottom:15px; }
.score-table,.hole-table { width:100%; border-collapse: collapse; margin-top:10px; }
.score-table th,.score-table td,.hole-table th,.hole-table td { border:1px solid #004d40; padding:5px; text-align:center; }
.winner { background:#80cbc4; font-weight:bold; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:#ffffff; padding:20px; border-radius:10px; max-width:400px; width:90%; }
.modal-content h2 { margin-top:0; color:#00695c; }
.label-player { font-weight:bold; color:#004d40; }
.summary-buttons { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-top:10px; }
.summary-buttons button { flex:1 1 120px; padding:10px; border-radius:5px; border:none; cursor:pointer; background-color:#26a69a; color:white; font-weight:bold; }
.summary-buttons button:hover { background-color:#00796b; opacity:0.9; }
</style>
</head>
<body>
<div class="container" id="setupScreen">
  <h1>Olympic Golf Putt Score App üèåÔ∏è‚Äç‚ôÇÔ∏è by James</h1>
  <div class="card">
    <h2>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢</h2>
    <ul>
      <li>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ä‡∏ô‡∏∞</li>
      <li>‡∏û‡∏±‡∏ï‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏•‡∏∏‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î = 1, ‡∏ï‡πà‡∏≠‡πÑ‡∏õ 2, 3,...</li>
      <li>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô = ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á √ó ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô √ó ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô</li>
      <li>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô √ó ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</li>
      <li>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô Bokey ‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö</li>
    </ul>
  </div>
  <input type="number" id="numPlayers" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô" min="2" max="10">
  <div id="playerNamesInputs"></div>
  <input type="number" id="pricePerPoint" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô">
  <button onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
  <button onclick="resetAll()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
</div>

<div class="container" id="gameScreen" style="display:none;">
  <h2>‡∏´‡∏•‡∏∏‡∏° <span id="currentHole">1</span>/18</h2>
  <div id="scoreInputs"></div>
  <div class="summary-buttons">
    <button onclick="prevHole()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
    <button onclick="nextHole()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ(‡∏ß‡πà‡∏≤‡∏á=0)</button>
    <button onclick="showHoleScores()">üìä ‡∏î‡∏π‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏°</button>
    <button onclick="resetAll()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>
</div>

<div class="container" id="summaryScreen" style="display:none;">
  <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô & ‡πÄ‡∏á‡∏¥‡∏ô</h2>
  <table class="score-table" id="summaryTable"></table>
  <div class="summary-buttons">
    <button onclick="goToHole(8)">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏∏‡∏° 9</button>
    <button onclick="goToHole(17)">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏•‡∏∏‡∏° 18</button>
    <button onclick="shareResults()">üì§ ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
    <button onclick="goToSetup()">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
  </div>
</div>

<div class="modal" id="modalReset">
  <div class="modal-content">
    <h2>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Reset</p>
    <button onclick="confirmReset()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
    <button onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>
</div>

<div class="modal" id="modalHoleScores">
  <div class="modal-content">
    <h2>‡∏™‡∏Å‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏¢‡∏´‡∏•‡∏∏‡∏°</h2>
    <table class="hole-table" id="holeScoreTable"></table>
    <button onclick="closeHoleModal()">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<script>
let players=[], scores=[], currentHole=0, numHoles=18, pricePerPoint=10;

function startGame(){
  let num = parseInt(document.getElementById('numPlayers').value);
  if(isNaN(num)||num<2){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡∏ô"); return;}
  let priceInput = parseFloat(document.getElementById('pricePerPoint').value);
  if(isNaN(priceInput)||priceInput<=0){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°"); return;}
  pricePerPoint = priceInput;
  players=[]; 
  for(let i=0;i<num;i++){
    players.push(document.getElementById('playerName'+i).value.trim()||'‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô'+(i+1));
  }
  scores=Array(num).fill(0).map(()=>Array(numHoles).fill(0));
  currentHole=0;
  showGameScreen();
}

function showGameScreen(){
  document.getElementById('setupScreen').style.display='none';
  document.getElementById('summaryScreen').style.display='none';
  document.getElementById('gameScreen').style.display='block';
  document.getElementById('currentHole').textContent = currentHole+1;
  renderScoreInputs();
}

function renderScoreInputs(){
  let html='';
  let totals = players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  players.forEach((p,i)=>{
    let runningTotal = scores[i].slice(0,currentHole).reduce((a,b)=>a+b,0);
    let currentScore = scores[i][currentHole]||0;
    let totalWithCurrent = runningTotal+currentScore;
    totals[i] = totalWithCurrent;
    html+=`<div><label id="label${i}" class="label-player">${p} (‡∏£‡∏ß‡∏°: ${totalWithCurrent})</label><input type="number" id="score${i}" value="${scores[i][currentHole]||''}"></div>`;
  });
  document.getElementById('scoreInputs').innerHTML=html;
  players.forEach((p,i)=>{
    document.getElementById('score'+i).addEventListener('input', ()=>{
      let val = parseFloat(document.getElementById('score'+i).value);
      scores[i][currentHole]=isNaN(val)?0:val;
      updateRankHighlight();
    });
  });
  updateRankHighlight();
}

function updateRankHighlight(){
  let totals = players.map((p,i)=>scores[i].slice(0,currentHole+1).reduce((a,b)=>a+b,0));
  let sorted = [...totals].map((v,i)=>({i,v})).sort((a,b)=>b.v-a.v);
  players.forEach((p,i)=>{
    document.getElementById('label'+i).textContent = `${p} (‡∏£‡∏ß‡∏°: ${totals[i]})`;
    document.getElementById('label'+i).style.color = '#004d40';
  });
  if(sorted[0]) document.getElementById('label'+sorted[0].i).style.color='gold';
  if(sorted[1]) document.getElementById('label'+sorted[1].i).style.color='silver';
  if(sorted[2]) document.getElementById('label'+sorted[2].i).style.color='#cd7f32';
}

function nextHole(){players.forEach((p,i)=>{scores[i][currentHole]=parseFloat(document.getElementById('score'+i).value)||0;}); currentHole++; if(currentHole>=numHoles) showSummary(); else showGameScreen();}
function prevHole(){players.forEach((p,i)=>{scores[i][currentHole]=parseFloat(document.getElementById('score'+i).value)||0;}); if(currentHole>0){currentHole--; showGameScreen();}}

function showSummary(){
  document.getElementById('gameScreen').style.display='none';
  document.getElementById('summaryScreen').style.display='block';
  let html='<tr><th>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</th><th>‡πÄ‡∏á‡∏¥‡∏ô</th></tr>';
  let totals = players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  let money = Array(players.length).fill(0);
  players.forEach((p,i)=>{let gain=totals[i]*pricePerPoint*(players.length-1); money[i]+=gain; players.forEach((other,j)=>{if(i!=j) money[j]-=totals[i]*pricePerPoint;});});
  let maxScore=Math.max(...totals);
  players.forEach((p,i)=>{let cls=(totals[i]==maxScore)?'winner':''; html+=`<tr class="${cls}"><td>${p}</td><td>${totals[i]}</td><td>${money[i]}</td></tr>`;});
  document.getElementById('summaryTable').innerHTML=html;
}

function shareResults(){
  let totals = players.map((p,i)=>scores[i].reduce((a,b)=>a+b,0));
  let money = Array(players.length).fill(0);
  players.forEach((p,i)=>{let gain=totals[i]*pricePerPoint*(players.length-1); money[i]+=gain; players.forEach((other,j)=>{if(i!=j) money[j]-=totals[i]*pricePerPoint;});});
  let resultText='‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• Golf Putt:\n'; players.forEach((p,i)=>{resultText+=`${p}: ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° ${totals[i]}, ‡πÄ‡∏á‡∏¥‡∏ô ${money[i]}\n`;});
  let textarea=document.createElement('textarea'); textarea.value=resultText; document.body.appendChild(textarea); textarea.select();
  try{document.execCommand('copy'); alert('‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ clipboard ‡πÅ‡∏•‡πâ‡∏ß!');} catch(e){alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ clipboard ‡πÑ‡∏î‡πâ, ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠:\n'+resultText);}
  document.body.removeChild(textarea);
}

function showHoleScores(){
  let html='<tr><th>‡∏´‡∏•‡∏∏‡∏°</th>'; players.forEach(p=>html+=`<th>${p}</th>`); html+='<th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏∞‡∏™‡∏°</th></tr>';
  let runningTotals=Array(players.length).fill(0);
  for(let h=0;h<numHoles;h++){html+='<tr><td>'+(h+1)+'</td>'; players.forEach((p,i)=>{runningTotals[i]+=scores[i][h]; html+='<td>'+scores[i][h]+'</td>';}); html+='<td>'+runningTotals.join(' | ')+'</td>'; html+='</tr>';}
  document.getElementById('holeScoreTable').innerHTML=html;
  document.getElementById('modalHoleScores').style.display='flex';
}
function closeHoleModal(){document.getElementById('modalHoleScores').style.display='none';}
function resetAll(){document.getElementById('modalReset').style.display='flex'; document.getElementById('modalReset').querySelector('p').textContent="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Reset";}
function confirmReset(){location.reload();}
function closeModal(){document.getElementById('modalReset').style.display='none';}
function goToSetup(){resetAll();}
function goToHole(h){currentHole=h; showGameScreen();}

document.getElementById('numPlayers').addEventListener('input', function(){
  let n=parseInt(this.value); let html='';
  for(let i=0;i<n;i++){
    let saved=JSON.parse(localStorage.getItem('players')||'[]');
    html+=`<input type="text" id="playerName${i}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô ${i+1}" value="${saved[i]||''}">`;
  }
  document.getElementById('playerNamesInputs').innerHTML=html;
});

window.onload=function(){
  let saved=JSON.parse(localStorage.getItem('players')||'[]');
  if(saved.length>0){document.getElementById('numPlayers').value=saved.length; document.getElementById('numPlayers').dispatchEvent(new Event('input'));}
};
</script>
</body>
</html>
